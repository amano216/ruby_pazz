<!DOCTYPE html>
<html>
<head>
  <title>Test If-Else</title>
</head>
<body>
  <h1>Test If-Else Statement</h1>
  <div id="results"></div>
  
  <script src="app.js"></script>
  <script>
    const interpreter = new RubyInterpreter();
    const results = document.getElementById('results');
    
    const tests = [
      {
        name: "If-else (true condition)",
        code: 'number = 10\nif number % 2 == 0\n  puts "偶数"\nelse\n  puts "奇数"\nend',
        expected: "偶数\n"
      },
      {
        name: "If-else (false condition)",
        code: 'number = 11\nif number % 2 == 0\n  puts "偶数"\nelse\n  puts "奇数"\nend',
        expected: "奇数\n"
      },
      {
        name: "If-elsif-else (first condition)",
        code: 'score = 95\nif score >= 90\n  puts "A"\nelsif score >= 80\n  puts "B"\nelse\n  puts "C"\nend',
        expected: "A\n"
      },
      {
        name: "If-elsif-else (elsif condition)",
        code: 'score = 85\nif score >= 90\n  puts "A"\nelsif score >= 80\n  puts "B"\nelse\n  puts "C"\nend',
        expected: "B\n"
      },
      {
        name: "If-elsif-else (else condition)",
        code: 'score = 75\nif score >= 90\n  puts "A"\nelsif score >= 80\n  puts "B"\nelse\n  puts "C"\nend',
        expected: "C\n"
      },
      {
        name: "Nested if-else",
        code: 'x = 5\ny = 10\nif x > 0\n  if y > 5\n    puts "both positive"\n  else\n    puts "x positive"\n  end\nelse\n  puts "x not positive"\nend',
        expected: "both positive\n"
      }
    ];
    
    tests.forEach(test => {
      try {
        interpreter.reset();
        const result = interpreter.execute(test.code);
        const passed = result === test.expected;
        
        results.innerHTML += `
          <div style="margin: 10px; padding: 10px; border: 1px solid ${passed ? 'green' : 'red'}">
            <h3>${test.name}: ${passed ? '✅ PASSED' : '❌ FAILED'}</h3>
            <pre>Code:\n${test.code}</pre>
            <pre>Expected: ${JSON.stringify(test.expected)}</pre>
            <pre>Got: ${JSON.stringify(result)}</pre>
          </div>
        `;
      } catch (error) {
        results.innerHTML += `
          <div style="margin: 10px; padding: 10px; border: 1px solid red">
            <h3>${test.name}: ❌ ERROR</h3>
            <pre>Code:\n${test.code}</pre>
            <pre>Error: ${error.message}</pre>
          </div>
        `;
      }
    });
  </script>
</body>
</html>